<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerAdmin webmaster@lucaswerkmeister.de

    ServerName jupyter-content.lucaswerkmeister.de

    DocumentRoot /srv/jupyter/notebooks/

    <Directory /srv/jupyter/notebooks/>
        Require all granted
        Options +Indexes -FollowSymlinks
    </Directory>

    SSLEngine on

    SSLCertificateFile    /etc/letsencrypt.sh/certs/lucaswerkmeister.de/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt.sh/certs/lucaswerkmeister.de/privkey.pem

    # HSTS; max-age in seconds: 604800 (1 week)
    Header always set Strict-Transport-Security "max-age=604800; includeSubDomains"

    # CSP; https://w3c.github.io/webappsec-csp/:
    # - fallback: none
    # - scripts may be loaded from this domain only
    # - styles may be loaded from this domain and inline
    # - media may be loaded from this domain
    Header always set Content-Security-Policy "default-src 'none'; script-src 'self'; style-src 'self' 'unsafe-inline'; media-src 'self'"

    # XFO; this domain may never be iframed
    Header always set X-Frame-Options "DENY"

    # configure built-in XSS protection of IE, Chrome, Safari
    Header always set X-Xss-Protection "1; mode=block"

    # prevent IE and Chrome from trying to guess a different MIME type than the declared one
    Header always set X-Content-Type-Options "nosniff"
</VirtualHost>
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
