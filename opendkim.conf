# This is a basic configuration that can easily be adapted to suit a standard
# installation. For more advanced options, see opendkim.conf(5) and/or
# /usr/share/doc/opendkim/examples/opendkim.conf.sample.

# Log to syslog
Syslog			yes
# Required to use local socket with MTAs that access the socket as a non-
# privileged user (e.g. Postfix)
UMask			002

# Sign for example.com with key in /etc/dkimkeys/dkim.key using
# selector '2007' (e.g. 2007._domainkey.example.com)
#Domain			example.com
#KeyFile		/etc/dkimkeys/dkim.key
#Selector		2007

# Commonly-used options; the commented-out versions show the defaults.
#Canonicalization	simple
#Mode			sv
#SubDomains		no
#ADSPAction            continue

# Always oversign From (sign using actual From and a null From to prevent
# malicious signatures header fields (From and/or others) between the signer
# and the verifier.  From is oversigned by default in the Debian pacakge
# because it is often the identity key used by reputation systems and thus
# somewhat security sensitive.
#OversignHeaders		From

# Actually, I want to sign some more. And I see no reason *not* to oversign most of these.
# (partially based on http://noxxi.de/research/breaking-dkim-on-purpose-and-by-chance.html)
SignHeaders		From,Reply-To,Subject,Date,To,Cc,In-Reply-To,References,Message-Id,Sender,Content-Type,Content-Transfer-Encoding,Content-Disposition,Mime-Version
OversignHeaders		From,Reply-To,Subject,Date,To,Cc,In-Reply-To,References,Message-Id,Sender,Content-Type,Content-Transfer-Encoding,Content-Disposition,Mime-Version

##  ResolverConfiguration filename
##      default (none)
##
##  Specifies a configuration file to be passed to the Unbound library that
##  performs DNS queries applying the DNSSEC protocol.  See the Unbound
##  documentation at http://unbound.net for the expected content of this file.
##  The results of using this and the TrustAnchorFile setting at the same
##  time are undefined.
##  In Debian, /etc/unbound/unbound.conf is shipped as part of the Suggested
##  unbound package

# ResolverConfiguration     /etc/unbound/unbound.conf

##  TrustAnchorFile filename
##      default (none)
##
## Specifies a file from which trust anchor data should be read when doing
## DNS queries and applying the DNSSEC protocol.  See the Unbound documentation
## at http://unbound.net for the expected format of this file.

TrustAnchorFile       /usr/share/dns/root.key

# Added from http://arstechnica.com/business/2014/03/taking-e-mail-back-part-3-fortifying-your-box-against-spammers/
Canonicalization	relaxed/relaxed
ExternalIgnoreList	refile:/etc/opendkim/TrustedHosts
InternalHosts		refile:/etc/opendkim/TrustedHosts
KeyTable		refile:/etc/opendkim/KeyTable
SigningTable		refile:/etc/opendkim/SigningTable
LogWhy			Yes
#PidFile			/var/run/opendkim/opendkim.pid
Socket			local:/var/spool/postfix/opendkim/opendkim.sock
SyslogSuccess		Yes
TemporaryDirectory	/var/tmp
UserID			opendkim:opendkim

# adapted for own opendkim.service
PidFile			/run/opendkim/opendkim.pid
